(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6052:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>f});var t=i(7876),l=i(7126),n=i.n(l),a=i(4232),s=i(8878),o=i.n(s);function c(){let[e,r]=(0,a.useState)(1),[i,l]=(0,a.useState)([!1,0]),[n,s]=(0,a.useState)(4),[c,f]=(0,a.useState)([9,0]),[h,u]=(0,a.useState)(5),[d,x]=(0,a.useState)([[]]),[j,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)([[]]),k=()=>{x(Array.from({length:h},()=>Array(h).fill(0))),v(Array.from({length:h},()=>Array(h).fill(0))),f([h*h,0]),r(1),l([!1,0])};(0,a.useEffect)(()=>{k()},[]);let m=(i,t)=>{x(r=>r.map((r,l)=>l===i?r.map((r,i)=>i===t?e:r):r)),b(i,t,e),r(1===e?2:1),f(e=>[e[0],e[1]+1])},b=(e,r,i)=>{let t=_.map(e=>[...e]),a=1,s=!0;for(let l=r-1;l>=0;l--){if(s){if(d[e][l]===i){a++;continue}else if(s=!1,2===i)break}if(2===d[e][l])break;1===d[e][l]?0===d[e][l+1]&&(t[e][l+1]+=5):t[e][l]+=1}s=!0;for(let l=r+1;l<d[e].length;l++){if(s){if(d[e][l]===i){a++;continue}else if(s=!1,2===i)break}if(2===d[e][l])break;1===d[e][l]?0===d[e][l-1]&&(t[e][l-1]+=5):t[e][l]+=1}if(a>=n)return void l([!0,i]);if(a>1)for(let r=0;r<d[e].length;r++)0===d[e][r]&&(t[e][r]+=3*a);a=1,s=!0;for(let l=e-1;l>=0;l--){if(s){if(d[l][r]===i){a++;continue}else if(s=!1,2===i)break}if(2===d[l][r])break;1===d[l][r]?0===d[l+1][r]&&(t[l+1][r]+=5):t[l][r]++}s=!0;for(let l=e+1;l<d.length;l++){if(s){if(d[l][r]===i){a++;continue}else if(s=!1,2===i)break}if(2===d[l][r])break;1===d[l][r]?0===d[l-1][r]&&(t[l-1][r]+=5):t[l][r]+=1}if(a>=n)return void l([!0,i]);if(a>1)for(let e=0;e<d.length;e++)0===d[e][r]&&(t[e][r]+=3*a);a=1,s=!0;let o=e-1,c=r-1;for(;o>=0&&c>=0;){if(s){if(d[o][c]===i){a++,o--,c--;continue}else if(s=!1,2===i)break}if(2===d[o][c])break;1===d[o][c]?0===d[o+1][c+1]&&(t[o+1][c+1]+=5):t[o][c]+=2,o--,c--}for(o=e+1,c=r+1,s=!0;o<d.length&&c<d[e].length;){if(s){if(d[o][c]===i){a++,o++,c++;continue}else if(s=!1,2===i)break}if(2===d[o][c])break;1===d[o][c]?0===d[o-1][c-1]&&(t[o-1][c-1]+=5):t[o][c]+=2,o++,c++}if(a>=n)return void l([!0,i]);if(a>1){for(o=e-1,c=r-1;o>=0&&c>=0;)0===d[o][c]&&(t[o][c]+=3*a),o--,c--;for(o=e+1,c=r+1;o<h&&c<h;)0===d[o][c]&&(t[o][c]+=3*a),o++,c++}for(a=1,s=!0,o=e-1,c=r+1;o>=0&&c<d[r].length;){if(s){if(d[o][c]===i){a++,o--,c++;continue}else if(s=!1,2===i)break}if(2===d[o][c])break;1===d[o][c]?0===d[o+1][c-1]&&(t[o+1][c-1]+=5):t[o][c]+=2,o--,c++}for(o=e+1,c=r-1,s=!0;o<d.length&&c>=0;){if(s){if(d[o][c]===i){a++,o++,c--;continue}else if(s=!1,2===i)break}if(2===d[o][c])break;1===d[o][c]?0===d[o-1][c+1]&&(t[o-1][c+1]+=5):t[o][c]+=2,o++,c--}if(a>=n)return void l([!0,i]);if(a>1){for(o=e-1,c=r+1;o>=0&&c<h;)0===d[o][c]&&(t[o][c]+=3*a),o--,c++;for(o=e+1,c=r-1;o<h&&c>=0;)0===d[o][c]&&(t[o][c]+=3*a),o++,c--}t[e][r]=0,v(t)};return(0,a.useEffect)(()=>{k()},[h,n,j]),(0,a.useEffect)(()=>{if(j&&2===e){let e=0,r=[];if(_.forEach((i,t)=>{i.forEach((i,l)=>{i>e?(e=i,r=[[t,l]]):i===e&&r.push([t,l])})}),c[0]!==c[1]&&!1===i[0]){let e=0;r.length>1&&(e=Math.floor(Math.random()*r.length))>=r.length&&(e=r.length-1),m(r[e][0],r[e][1])}}},[e]),(0,t.jsxs)("div",{className:o().game,children:[(0,t.jsxs)("div",{className:o().gameBox,children:[(0,t.jsx)(()=>{if(!0===i[0])if(1===i[1])return(0,t.jsx)("h2",{className:o().winnerDiv,children:"O 勝利"});else return(0,t.jsx)("h2",{className:o().winnerDiv,children:"X 勝利"});return c[0]===c[1]?(0,t.jsx)("h2",{className:o().winnerDiv,children:"平手"}):(0,t.jsxs)("h2",{children:["現在回合:",1===e?"O":"X"]})},{}),(0,t.jsx)(()=>{let r=[],l=0;for(let n=0;n<d.length;n++)for(let a=0;a<d[0].length;a++){let s="";1===d[n][a]?s="O":2===d[n][a]&&(s="X"),r.push((0,t.jsx)("div",{className:o().checkerBoard,"data-value":d[n][a],onClick:r=>{"0"===r.currentTarget.dataset.value&&!1===i[0]&&(j&&2===e||m(n,a))},children:s},l)),l++}return(0,t.jsx)("div",{className:o().checkerBoardDiv,style:{"--limit":h},children:r})},{}),(0,t.jsx)("button",{onClick:()=>{k()},className:"".concat(o().reStartButton," bg-sky-300 hover:bg-sky-500 hover:not-focus:bg-sky-400"),children:"重新開始"})]}),(0,t.jsxs)("article",{className:o().gameDirections,children:[(0,t.jsx)("h1",{children:"井字遊戲"}),(0,t.jsx)("h2",{children:"遊戲說明:"}),(0,t.jsx)("p",{children:"輪流在棋格中畫O或X"}),(0,t.jsxs)("p",{children:["先將",n,"顆同符號連成一線（橫、直、斜）的人獲勝"]}),(0,t.jsx)("p",{children:"如果棋盤填滿且沒有人連成一線，則為平局"}),(0,t.jsx)("h2",{children:"可進行設定:"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:["當前棋盤大小:",h,"x",h]}),(0,t.jsxs)("select",{defaultValue:h,className:"bg-sky-300",onChange:e=>{let r=parseInt(e.target.value);u(r),r<n&&s(r)},children:[(0,t.jsx)("option",{value:3,children:"3"}),(0,t.jsx)("option",{value:4,children:"4"}),(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:6,children:"6"}),(0,t.jsx)("option",{value:7,children:"7"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:["勝利條件:連接",n,"個"]}),(0,t.jsx)(()=>{let e=[];for(let r=3;r<=h;r++)e.push((0,t.jsx)("option",{value:r,children:r},r));return(0,t.jsx)("select",{defaultValue:n,className:"bg-sky-300",onChange:e=>{s(parseInt(e.target.value))},children:e})},{})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"是否開啟電腦模式"}),(0,t.jsxs)("select",{defaultValue:!0===j?"true":"false",className:"bg-sky-300",onChange:e=>{"true"===e.target.value?g(!0):g(!1)},children:[(0,t.jsx)("option",{value:"true",children:"開啟"}),(0,t.jsx)("option",{value:"false",children:"關閉"})]})]})]})]})}function f(){return(0,t.jsx)("main",{className:n().main,children:(0,t.jsx)(c,{})})}},6760:(e,r,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(6052)}])},7126:e=>{e.exports={main:"index_main__hxNxr"}},8878:e=>{e.exports={game:"ooxx_game__jaVjT",gameBox:"ooxx_gameBox__DMYtL",winnerDiv:"ooxx_winnerDiv__XP_PM",checkerBoardDiv:"ooxx_checkerBoardDiv__Z2egg",checkerBoard:"ooxx_checkerBoard__z_4a9",reStartButton:"ooxx_reStartButton__lsStm",gameDirections:"ooxx_gameDirections__Yj_Qc"}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(6760)),_N_E=e.O()}]);